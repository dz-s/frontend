{"version":3,"sources":["App.styled.ts","Player.styled.ts","Player.tsx","Controls.styled.ts","Controls.tsx","App.tsx","index.tsx"],"names":["AppStyle","styled","div","PlayerStyle","PlayerMetaStyle","Player","props","ref","React","createRef","state","autoplay","document","addEventListener","handleKeyDown","bind","e","code","this","moveCursor","playing","onPause","onPlay","node","current","play","pause","setState","key","source","controls","autoPlay","loop","looping","muted","preload","onEnded","poster","style","maxHeight","src","name","Component","ControlsStyle","ControlsTextStyle","Controls","onClick","toggleLoop","href","target","color","textDecoration","App","playlist","cursor","delta","length","arr","i","j","Math","floor","random","PROXY","BASE","axios","get","threads","data","promisedPosts","slice","map","x","id","then","v","value","status","Promise","all","posts","y","files","filter","flatMap","flat","kind","full","thumbnail","shuffle","video","title","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.9f85a5fe.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nconst AppStyle = styled.div`\n  display: block;\n  margin: 0 auto;\n  width: 90vw;\n  text-align: center;\n`;\n\nexport {AppStyle};","import styled from \"styled-components\";\n\nconst PlayerStyle = styled.div`\n  height: 100%;\n  width: 100%;\n  \n  max-height: 70vh;\n`;\n\nconst PlayerMetaStyle = styled.div`\n  \n`;\n\nexport {PlayerStyle, PlayerMetaStyle};","import React from \"react\";\nimport * as S from \"./Player.styled\";\n\ninterface Props {\n    source: string;\n    name: string;\n    poster: string;\n\n    playing: boolean;\n    looping: boolean;\n\n    onPlay: Function;\n    onPause: Function;\n    moveCursor: Function;\n}\n\ninterface State {\n    autoplay: boolean;\n}\n\nclass Player extends React.Component<Props, State> {\n    ref: React.RefObject<HTMLVideoElement>;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.ref = React.createRef<HTMLVideoElement>();\n\n        this.state = {\n            autoplay: false\n        };\n\n        document.addEventListener(\"keydown\", this.handleKeyDown.bind(this));\n    }\n\n    handleKeyDown(e: KeyboardEvent) {\n        switch (e.code) {\n            case \"ArrowLeft\":\n                this.props.moveCursor(-1);\n                break;\n            case \"ArrowRight\":\n                this.props.moveCursor(1);\n                break;\n            case \"Space\":\n                this.props.playing ? this.props.onPause() : this.props.onPlay();\n                break;\n        }\n    }\n\n    componentDidMount() {\n    }\n\n    componentDidUpdate() {\n        const node = this.ref.current;\n        if (node)\n            this.props.playing ? node.play() : node.pause();\n\n        if (this.props.playing && !this.state.autoplay)\n            this.setState({autoplay: true});\n    }\n\n    render() {\n        return (\n            <div>\n                <S.PlayerStyle>\n                    <video\n                        ref={this.ref}\n                        key={this.props.source}\n                        controls={true}\n                        autoPlay={this.state.autoplay}\n                        loop={this.props.looping}\n                        muted={false}\n                        preload={\"auto\"}\n                        onPlay={() => this.props.onPlay()}\n                        onPause={() => this.props.onPause()}\n                        onEnded={() => this.props.moveCursor(1)}\n                        poster={this.props.poster}\n                        style={{maxHeight: \"70vh\"}}\n                    >\n                        <source src={this.props.source}/>\n                    </video>\n                </S.PlayerStyle>\n                <S.PlayerMetaStyle>\n                    {this.props.name}\n                </S.PlayerMetaStyle>\n            </div>\n        )\n    }\n}\n\n\nexport default Player;\n","import styled from \"styled-components\";\n\nconst ControlsStyle = styled.div`\n  text-align: center;\n  padding: 1.5rem;\n  position: relative;\n  margin: 0;\n  vertical-align: baseline;\n`;\n\nconst ControlsTextStyle = styled.div`\n  color: hotpink;\n  font-size: 1.25rem;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n  margin-right: 1rem;\n  display: inline-block;\n  text-decoration: none;\n\n  &:hover {\n    color: orange;\n  }\n  &:link {\n    color: hotpink;\n  }\n  &:visited {\n    color: red;\n  }\n`;\n\nexport {ControlsStyle, ControlsTextStyle};","import React from \"react\";\nimport * as S from \"./Controls.styled\";\n\n\ninterface Props {\n    source: string;\n    playing: boolean;\n\n    moveCursor: Function;\n    toggleLoop: Function;\n}\n\ninterface State {\n}\n\nclass Controls extends React.Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {}\n    }\n\n    render() {\n        return (\n            <S.ControlsStyle>\n                <S.ControlsTextStyle>\n                    <span onClick={() => this.props.moveCursor(-1)}>\n                    BACK\n                    </span>\n                </S.ControlsTextStyle>\n\n                <S.ControlsTextStyle>\n                    <span onClick={() => this.props.toggleLoop()}>\n                    LOOP\n                    </span>\n                </S.ControlsTextStyle>\n\n                <S.ControlsTextStyle>\n                    <a href={this.props.source} target={\"_blank\"} style={{color: \"hotpink\", textDecoration: \"none\"}}>\n                        DOWNLOAD\n                    </a>\n                </S.ControlsTextStyle>\n\n                <S.ControlsTextStyle>\n                    <span onClick={() => this.props.moveCursor(1)}>\n                    NEXT\n                    </span>\n                </S.ControlsTextStyle>\n\n            </S.ControlsStyle>\n        )\n    }\n}\n\nexport default Controls;","import React from \"react\";\nimport * as S from \"./App.styled\";\nimport Player from \"./Player\";\nimport Controls from \"./Controls\";\nimport axios from \"axios\";\n\ninterface Props {\n}\n\ninterface State {\n    playing: boolean;\n    looping: boolean;\n\n    playlist: Array<{ source: string; name: string; poster: string }>;\n    cursor: number;\n}\n\nclass App extends React.Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            playing: false,\n            looping: true,\n            playlist: [],\n            cursor: 0\n        }\n    }\n\n    onPlay() {\n        this.setState({playing: true});\n    }\n\n    onPause() {\n        this.setState({playing: false});\n    }\n\n    moveCursor(delta: number) {\n        const cursor = this.state.cursor + delta;\n\n        if (cursor < 0 || cursor >= this.state.playlist.length)\n            return;\n\n        this.setState({cursor: cursor});\n    }\n\n    toggleLoop() {\n        this.setState({looping: !this.state.looping})\n    }\n\n    shuffle<T>(arr: Array<T>): Array<T> {\n        for (let i = arr.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [arr[i], arr[j]] = [arr[j], arr[i]];\n        }\n        return arr;\n    }\n\n    async componentDidMount() {\n        let PROXY: string = \"\";\n        if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\n            PROXY = \"https://cors-anywhere.herokuapp.com/\";\n        }\n        const BASE = `https://one.karasique.io/0/b`;\n\n        const threads = (await axios.get(`${PROXY}${BASE}`)).data;\n\n        const promisedPosts = threads\n            .slice(0, 19)\n            .map((x: { id: string; }) =>\n                axios\n                    .get(`${PROXY}${BASE}/${x.id}`)\n                    .then(\n                        (v) => {\n                            return {value: v.data, status: 1}\n                        },\n                        (e) => {\n                            return {e: e, status: 0}\n                        }\n                    )\n            );\n\n        const files = (await Promise.all(promisedPosts))\n            .filter((x: any) => x.status === 1)\n            .flatMap((x: any) => x.value.posts.map((y: any) => y.files))\n            .flat();\n\n        const playlist = files\n            .filter((x: any) => x.kind === \"video\")\n            .map((x: any) => {\n                    return {\n                        source: x.full,\n                        name: x.name,\n                        poster: x.thumbnail\n                    }\n                }\n            );\n\n        this.setState({\n            playlist: this.shuffle(playlist)\n        })\n    }\n\n    render() {\n        const {playlist, cursor} = this.state;\n        const video = playlist[cursor];\n        if (!video)\n            return (\n                \"Loading...\"\n            );\n\n        return (\n            <S.AppStyle>\n                <Player\n                    source={video.source}\n                    name={video.name}\n                    poster={video.poster}\n                    playing={this.state.playing}\n                    looping={this.state.looping}\n                    onPlay={this.onPlay.bind(this)}\n                    onPause={this.onPause.bind(this)}\n                    moveCursor={this.moveCursor.bind(this)}\n                />\n                <Controls\n                    source={video.source}\n                    playing={this.state.playing}\n                    moveCursor={this.moveCursor.bind(this)}\n                    toggleLoop={this.toggleLoop.bind(this)}\n                />\n            </S.AppStyle>\n        );\n    }\n}\n\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\ndocument.title = \"Karasique\";\n\nReactDOM.render(<App/>, document.getElementById(\"root\"));"],"sourceRoot":""}